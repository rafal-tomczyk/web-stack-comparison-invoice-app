{% extends "htmx_templates/base_htmx.html" %}
{% load static %}
{% block title %}Szczegóły Faktury (HTMX){% endblock %}

{% block content %}
<script src="https://unpkg.com/htmx.org@1.9.12"></script>

<div class="container mx-auto p-4">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-3xl font-bold">Szczegóły Faktury</h2>
    <a href="{% url 'htmx_invoices' %}" class="btn btn-neutral">← Lista faktur</a>
  </div>

  <div id="invoice-header">
    {% include "htmx_templates/_invoice_header.html" %}
  </div>

  <hr class="mb-4">
  <h3 class="text-2xl font-semibold mb-3">Pozycje Faktury</h3>
  {% if items %}
  <table class="table-auto w-full mb-6">
    <thead>
    <tr class="bg-gray-200">
      <th class="px-4 py-2">Produkt</th>
      <th class="px-4 py-2">Ilość</th>
      <th class="px-4 py-2">Cena netto</th>
      <th class="px-4 py-2">Suma netto</th>
      <th class="px-4 py-2">Podatek</th>
      <th class="px-4 py-2">Suma brutto</th>
    </tr>
    </thead>
    <tbody>
    {% for item in items %}
    <tr class="border-b">
      <td class="px-4 py-2">{{ item.product }}</td>
      <td class="px-4 py-2">{{ item.quantity }}</td>
      <td class="px-4 py-2">{{ item.net_price }}</td>
      <td class="px-4 py-2">{{ item.net_total }}</td>
      <td class="px-4 py-2">{{ item.tax_amount }}</td>
      <td class="px-4 py-2">{{ item.gross_total }}</td>
    </tr>
    {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p>Nie dodano jeszcze pozycji do tej faktury.</p>
  {% endif %}

  <div class="mt-6">
    <p><strong>Razem netto:</strong> {{ invoice.total_net }}</p>
    <p><strong>Razem podatek:</strong> {{ invoice.total_tax }}</p>
    <p><strong>Razem brutto:</strong> {{ invoice.total_gross }}</p>
  </div>
</div>
{% endblock %}
